<!DOCTYPE html>
<html>
  <head>
    <title>Starstruct</title>
    <link
      rel="icon"
      href="./media/small.svg"
      sizes="any"
      type="image/svg+xml" />
    <link rel="stylesheet" href="./styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <nav>
      <img id="logo" src="./media/large.svg" alt="Starstruct logo" />
      <div id="items">
        <a
          href="https://x.com/QueenAkaTech"
          style="--icon: url(./media/icons/twitter.svg)"
          class="grower"
          aria-label="Twitter / X"></a>
        <a
          href="https://github.com/QueenAka"
          style="--icon: url(./media/icons/github.svg)"
          class="grower"
          aria-label="GitHub"></a>
        <a
          href="https://scratch.mit.edu/users/AkaTech/"
          style="--icon: url(./media/icons/scratch.svg)"
          class="grower"
          aria-label="Scratch"></a>
        <a
          href="https://discord.com/users/1053491056127250462"
          style="--icon: url(./media/icons/discord.svg)"
          class="grower"
          aria-label="Discord"></a>
      </div>
    </nav>
    <main>
      <div class="card profile grower">
        <img
          src="./media/pfp.png"
          class="pfp"
          alt="PFP, drawn by @_sploogles on twitter / tiktok" />
        <div class="username">
          <div class="scrolling-names">
            <span>Aka</span><span>Ariah</span><span>Lexi</span
            ><span>Melody</span><span>Valerie</span><span>Cotton Candy</span
            ><span>Rina</span><span>Atlas</span><span>Starely</span
            ><span>Aka</span>
          </div>
        </div>
        <span class="pronouns">She / Her</span>
        <span class="time"><span id="time"></span></span>
        <span class="flags">
          <div
            style="--img: url(./media/pan.webp)"
            hover="Pansexual"
            alt="Pansexual"></div>
          <div
            style="--img: url(./media/demi.webp)"
            hover="Demisexual"
            alt="Demisexual"></div>
          <div
            style="--img: url(./media/auto.webp)"
            hover="Autosexual"
            alt="Autosexual"></div>
          <div
            style="--img: url(./media/trans.webp)"
            hover="Transgender"
            alt="Transgender"></div>
        </span>
        <div class="bio">
          к’° рџЌЁ к’±к’± <span id="quote">Skibidi toilet</span><br />к’° рџ§Ѓ к’±к’±
          Minor<br />к’° рџЌ° к’±к’± Neurospicy<br />к’° рџЌЎ к’±к’± WEB DEVELOPER<br />к’°
          рџ©· к’±к’± L + A + J + H + S<br />к’° рџђѕ к’±к’± Super stinky furry
        </div>
      </div>
      <div class="card songs grower" id="songs">
        <iframe src="#" id="frame" allowfullscreen></iframe>
      </div>
    </main>
    <div class="projectsh" id="projects">
      <a
        style="--icon: url(./media/icons/arrow.svg)"
        class="left"
        onclick="projects(-1)"
        tabindex="0"
        onkeydown="if(event.key === 'Enter'){ this.click(); }"
        aria-label="Scroll projects left"></a>
      <a
        style="--icon: url(./media/icons/arrow2.svg)"
        class="right"
        onclick="projects(1)"
        tabindex="0"
        onkeydown="if(event.key === 'Enter'){ this.click(); }"
        aria-label="Scroll projects right"></a>
      <div class="projects">
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
        <div class="card project grower" tabindex="0"></div>
      </div>
    </div>
    <script>
      function adjustLogo() {
        const nav = document.querySelector("nav");
        const logo = document.getElementById("logo");
        const items = document.getElementById("items");

        if (logo && items && nav) {
          const totalWidth = 270 + items.offsetWidth;
          logo.src =
            totalWidth > nav.offsetWidth
              ? "./media/small.svg"
              : "./media/large.svg";
        }
      }

      function resizeThings() {
        const songs = document.getElementById("songs");
        const projects = document.getElementById("projects");
        songs.style.height =
          document.querySelector("main").offsetHeight - 30 + "px";
        projects.style.height =
          document.querySelector("main").offsetHeight - 30 + "px";
        projects.style.width =
          document.querySelector("main").offsetWidth + "px";
        document.querySelector("nav").style.maxWidth = `${
          document.querySelector("main").offsetWidth
        }px`;
        document.querySelector("nav").style.padding = `0 calc(50% - ${
          document.querySelector("main").offsetWidth / 2
        }px`;
      }

      resizeThings();

      adjustLogo();
      window.addEventListener("resize", adjustLogo);
      window.addEventListener("load", adjustLogo);

      const namesContainer = document.querySelector(".scrolling-names");
      const names = namesContainer.querySelectorAll("span");
      let currentIndex = 1;

      function scrollNames() {
        namesContainer.style.transform = `translateY(-${currentIndex * 32}px)`;
        namesContainer.style.transition = "transform 0.5s ease";

        currentIndex++;
        if (currentIndex >= names.length) {
          setTimeout(() => {
            namesContainer.style.transition = "none";
            namesContainer.style.transform = "translateY(0)";
            currentIndex = 1;
          }, 500);
        }
      }

      setInterval(scrollNames, 2000);

      function updateTime() {
        const now = new Date();
        const options = {
          timeZone: "America/New_York",
          hour: "numeric",
          minute: "2-digit",
        };
        const newYorkTime = now.toLocaleTimeString("en-US", options);
        document.getElementById("time").textContent = newYorkTime;
      }

      updateTime();
      setInterval(updateTime, 5000);

      let key = "AIzaSyA4ZxhkApuvWHxhFybbbYcCUno-dNflWgg";
      let list = "PLrF3JmCm8j0OQthA_VpRV3RpVy8MrOnWh";
      async function getPlaylistItems(pageToken = "") {
        const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${list}&key=${key}&pageToken=${pageToken}`;
        const response = await fetch(url);
        const data = await response.json();
        data.items.forEach((song) => {
          const name = song.snippet.title;
          const artist = song.snippet.videoOwnerChannelTitle;
          const thumb = song.snippet.thumbnails.default.url;
          const songCard = document.createElement("div");
          const img = document.createElement("img");
          img.alt = `Song "${name}" thumbnail`;
          const nameSpan = document.createElement("span");
          const artistSpan = document.createElement("span");
          songCard.classList.add("song");
          nameSpan.classList.add("name");
          artistSpan.classList.add("artist");
          img.src = thumb;
          nameSpan.innerText = name;
          artistSpan.innerText = artist.replace(" - Topic", "");
          songCard.appendChild(img);
          songCard.appendChild(nameSpan);
          songCard.appendChild(artistSpan);
          songCard.onclick = () => {
            playSong(song.snippet.resourceId.videoId);
          };
          songCard.onkeydown = (event) => {
            if (event.key === "Enter") {
              songCard.click();
            }
          };
          songCard.tabIndex = 0;
          document.getElementById("songs").appendChild(songCard);
        });
      }

      getPlaylistItems();

      function playSong(id) {
        const frame = document.getElementById("frame");
        frame.src = `https://www.youtube.com/embed/${id}?autoplay=1&loop=1`;
        frame.classList.add("playing");
        document
          .getElementById("songs")
          .scrollTo({ top: 0, behavior: "smooth" });
      }

      const frame = document.getElementById("frame");
      frame.src = ``;

      function projects(dir) {
        document.querySelector(".projects").scrollBy({
          left: document.querySelector("main").offsetWidth * dir,
          behavior: "smooth",
        });
      }
    </script>
  </body>
</html>
